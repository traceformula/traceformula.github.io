<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solar System with Stars & Asteroids</title>
<style>
  body { margin:0; overflow:hidden; background: radial-gradient(ellipse at center, #000010 0%, #000000 100%); }
  canvas { display:block; }
  #popup {
    position:absolute; background:rgba(0,0,0,0.8); color:white; border:1px solid #444;
    padding:10px; border-radius:8px; pointer-events:auto; display:none; max-width:220px; z-index:10;
  }
  #popup h3 { margin:0 0 5px; font-size:16px; color:#ffd700; }
  #popup p { margin:0 0 10px; font-size:13px; line-height:1.3em; }
  #popup a { color:#00bfff; text-decoration:none; }
  #popup a:hover { text-decoration:underline; }
</style>
</head>
<body>
<canvas id="space"></canvas>
<div id="popup">
  <h3 id="popup-title"></h3>
  <p id="popup-desc"></p>
  <a id="popup-link" href="#" target="_blank">Learn more</a>
</div>

<script>
const canvas = document.getElementById("space");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let w = canvas.width, h = canvas.height;

let systemPaused = false;

const popup = document.getElementById("popup");
const popupTitle = document.getElementById("popup-title");
const popupDesc = document.getElementById("popup-desc");
const popupLink = document.getElementById("popup-link");

// Stars
const stars = [];
for(let i=0;i<300;i++){
  stars.push({
    x: Math.random()*w,
    y: Math.random()*h,
    r: Math.random()*1.2+0.3,
    brightness: Math.random()
  });
}

// Asteroid belt
const asteroids = [];
for(let i=0;i<120;i++){
  asteroids.push({
    distance: Math.random()*60 + 220,
    angle: Math.random()*Math.PI*2,
    size: Math.random()*2+1,
    speed: 0.002 + Math.random()*0.002
  });
}

// Planet class (same as previous version with rotation)
class Planet {
  constructor(name, size, distance, orbitSpeed, rotationSpeed, color1, color2, desc, url) {
    this.name = name;
    this.size = size;
    this.distance = distance;
    this.orbitSpeed = orbitSpeed;
    this.rotationSpeed = rotationSpeed;
    this.angle = Math.random() * Math.PI * 2;
    this.rotationAngle = Math.random() * Math.PI * 2;
    this.color1 = color1;
    this.color2 = color2;
    this.desc = desc;
    this.url = url;
  }

  draw() {
    const x = w/2 + this.distance * Math.cos(this.angle);
    const y = h/2 + this.distance * Math.sin(this.angle);

    // Orbit
    ctx.beginPath();
    ctx.strokeStyle = "rgba(255,255,255,0.05)";
    ctx.arc(w/2, h/2, this.distance, 0, Math.PI*2);
    ctx.stroke();

    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(this.rotationAngle);

    // Jupiter bands / Saturn rings
    if(this.name==="Jupiter") {
      for(let i=-this.size; i<this.size; i+=2) {
        ctx.beginPath();
        ctx.fillStyle = (i%4===0) ? "#d1a77c":"#b27c56";
        ctx.arc(0,i, this.size*0.3,0,Math.PI*2);
        ctx.fill();
      }
    } else if(this.name==="Saturn") {
      ctx.beginPath();
      ctx.strokeStyle = "rgba(200,180,150,0.5)";
      ctx.lineWidth = 6;
      ctx.ellipse(0,0,this.size+10,this.size+4,0,0,Math.PI*2);
      ctx.stroke();
    }

    // Planet shading
    const grad = ctx.createRadialGradient(-this.size*0.3,-this.size*0.3, this.size*0.2, 0,0,this.size);
    grad.addColorStop(0,this.color1);
    grad.addColorStop(0.7,this.color2);
    grad.addColorStop(1,"rgba(0,0,0,0.7)");
    ctx.beginPath();
    ctx.fillStyle = grad;
    ctx.arc(0,0,this.size,0,Math.PI*2);
    ctx.fill();

    // Atmosphere glow for Earth/Venus
    if(this.name==="Earth" || this.name==="Venus") {
      ctx.beginPath();
      ctx.strokeStyle = "rgba(100,150,255,0.2)";
      ctx.lineWidth=4;
      ctx.arc(0,0,this.size+2,0,Math.PI*2);
      ctx.stroke();
    }

    ctx.restore();

    this.screenX = x;
    this.screenY = y;
  }

  update() {
    if(!systemPaused) {
      this.angle += this.orbitSpeed;
      this.rotationAngle += this.rotationSpeed;
    }
    this.draw();
  }
}

// Sun
function drawSun() {
  const gradient = ctx.createRadialGradient(w/2,h/2,10,w/2,h/2,60);
  gradient.addColorStop(0,"yellow");
  gradient.addColorStop(1,"rgba(255,140,0,0)");
  ctx.beginPath();
  ctx.fillStyle = gradient;
  ctx.arc(w/2,h/2,40,0,Math.PI*2);
  ctx.fill();
}

// Planets
const planets = [
  new Planet("Mercury",5,60,0.03,0.02,"#aaa","#777",
    "The closest planet to the Sun, Mercury is a rocky world with extreme temperatures.",
    "https://solarsystem.nasa.gov/planets/mercury/overview/"),
  new Planet("Venus",8,100,0.02,0.01,"#e0c080","#b08040",
    "Venus has a thick, toxic atmosphere and surface temperatures hot enough to melt lead.",
    "https://solarsystem.nasa.gov/planets/venus/overview/"),
  new Planet("Earth",9,150,0.015,0.015,"#3a7bd5","#1a3f60",
    "Our home planet, the only known world with life and liquid water on its surface.",
    "https://solarsystem.nasa.gov/planets/earth/overview/"),
  new Planet("Mars",7,200,0.012,0.02,"#d14f36","#7f2a1f",
    "Known as the Red Planet, Mars is a target for future exploration and colonization.",
    "https://solarsystem.nasa.gov/planets/mars/overview/"),
  new Planet("Jupiter",20,270,0.008,0.005,"#d9b47c","#a26f4f",
    "The largest planet in the Solar System, with dozens of moons and the Great Red Spot.",
    "https://solarsystem.nasa.gov/planets/jupiter/overview/"),
  new Planet("Saturn",17,340,0.006,0.004,"#f0d78c","#cda96f",
    "Famous for its spectacular ring system, Saturn is a gas giant made mostly of hydrogen.",
    "https://solarsystem.nasa.gov/planets/saturn/overview/"),
  new Planet("Uranus",14,400,0.004,0.006,"#a0e5f5","#487f88",
    "An ice giant tilted on its side, Uranus has a pale blue-green color due to methane.",
    "https://solarsystem.nasa.gov/planets/uranus/overview/"),
  new Planet("Neptune",14,460,0.003,0.006,"#3872e5","#0b2a5f",
    "The farthest known planet, Neptune is a windy ice giant with a deep blue color.",
    "https://solarsystem.nasa.gov/planets/neptune/overview/")
];

// Hover & popup
function checkHover(e){
  const mx = e.offsetX;
  const my = e.offsetY;
  let hoveringPlanet = null;
  planets.forEach(p => {
    const dx = mx - p.screenX;
    const dy = my - p.screenY;
    if(Math.sqrt(dx*dx+dy*dy) < p.size + 5) hoveringPlanet = p;
  });

  const popupRect = popup.getBoundingClientRect();
  const mouseOverPopup = (e.clientX>=popupRect.left && e.clientX<=popupRect.right &&
                         e.clientY>=popupRect.top && e.clientY<=popupRect.bottom);

  if(hoveringPlanet || mouseOverPopup){
    systemPaused=true;
    if(hoveringPlanet){
      let left=mx-15, top=my-15;
      left=Math.min(left, window.innerWidth-popup.offsetWidth-5);
      top=Math.min(top, window.innerHeight-popup.offsetHeight-5);
      popup.style.left=left+"px";
      popup.style.top=top+"px";
      popupTitle.textContent=hoveringPlanet.name;
      popupDesc.textContent=hoveringPlanet.desc;
      popupLink.href=hoveringPlanet.url;
    }
    popup.style.display="block";
  }else{
    systemPaused=false;
    popup.style.display="none";
  }
}

canvas.addEventListener("mousemove", checkHover);
popup.addEventListener("mousemove", checkHover);

// Animation
function animate(){
  ctx.clearRect(0,0,w,h);

  // Draw stars
  stars.forEach(s => {
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${0.5+0.5*Math.sin(Date.now()/500 + s.brightness*10)})`;
    ctx.arc(s.x, s.y, s.r,0,Math.PI*2);
    ctx.fill();
  });

  drawSun();

  // Draw asteroid belt
  asteroids.forEach(a=>{
    const x = w/2 + a.distance * Math.cos(a.angle);
    const y = h/2 + a.distance * Math.sin(a.angle);
    ctx.beginPath();
    ctx.fillStyle = "gray";
    ctx.arc(x,y,a.size,0,Math.PI*2);
    ctx.fill();
    if(!systemPaused) a.angle += a.speed;
  });

  // --- Draw planetary orbits ---
  ctx.save();
  ctx.strokeStyle = "rgba(255,255,255,0.05)";
  ctx.lineWidth = 1;
  planets.forEach(p => {
      ctx.beginPath();
      ctx.arc(w/2, h/2, p.distance, 0, Math.PI*2);
      ctx.stroke();
  });
  ctx.restore();
  // ----------------------------

  // Draw planets
  planets.forEach(p=>p.update());

  requestAnimationFrame(animate);
}
animate();

// Resize
window.addEventListener("resize",()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
  w=canvas.width;
  h=canvas.height;
});
</script>
</body>
</html>
